\section{Introduction \& Background}

Under data explosion adn data becaming treasures, the cloud computing is valued and being developed to store and dig the data mine. In order to meet the various needs of cloud computing, virtualization has become an important technology of cloud computing. In the meanwhile, the securtiy of cloud is also to be taken more serious. Lots of techniques is used, including TEE.

Trusted Execution Environment (TEE) is a security domian in CPU who is isolated from the other, i.e. REE. TEE is capable of providing confidentiality and intergity for the codes and data stored in it. All accepted code have been authorized by TEE so that it is trusted. Besides, TEE need all code and assets load and start in a expected way so that it won't be tempered. A TEE should also responsible for isolation between TEE and REE. In addition, each TA can only access it own assets. A TEE is a important composition of trusted computing. Famous TEE includes TrustZone\cite{armtz2021}, SGX~\cite{johnpmechalas2016}, SEV\cite{SEV2016}, and etc.

\subsection{TrustZone}

TrustZone~\cite{armtz2021} is the first commercial hardware architecture to support TEE. After development in these years, TrustZone is widely used in mobile devices to provide trusted computing. TrustZone seperates the hardware and software resources, such as memories, I/O, and interrupts, into two parts, Secure world and Non-secure world (i.e. Normal world). Each world has their own kernel space and user space, associated with cache, memory, and etc. Non-seucre world is not capable of accessing the resources in Secure world, but Secure world has access rights to resources in Non-secure world. In addition, each world has its own privileges level, represented in exception levels. Note that there is only Non-secure world having exception level 2 (EL2). Correspondingly, processors have two state, Secure state and Non-secure state, to handle affairs in two different worlds.

\subsection{Secure EL2}

In Armv8.4-A, Secure EL2~\cite{armvirtual2021} is introduced as an optional feature. Virtualization is used to be in Normal world for there is no Hpy mode, the same with EL2, in Secure world. When the Secure Virtualization enable, the platform firmware in EL3 can be move to seperate partitions in EL1, so that the code in EL3 can be minimized. Secure Partion Manager (SPM) manages these Secure Partions (SPs). If EL2 in Secure world is supported, the processor needs use SCR\_EL3.EEL2 bit to enable it.  

\subsection{Hafnium}

Hafnium~\cite{armhafnium2021} is an open-source software for manage the Secure Partion. 

\subsection{Virtualization of TEE Technology}

Virtualization is a technology to divide the hardware resouce and create virtual instances who act like a real system. Since 1960s, virtualization has been always popular in computer science. The trend of virtualization is more intense these year, especially after cloud computing becomes more and more popular. 

However, TrustZone is not designed to be virtualizable in the past few years. All virtual machines managed by the same hypervisor shoudld trust the same Trusted kernel, while there are amount of vulnerabilities discovered in major venders' trusted kernel. Besides, some manufacturers would like to use their own Trusted OS instead of other vendors'.

Some TEE supports virtualization at the beginning, such as SEV and TDX~\cite{TDX2020}. There 
% Histroy of virtualization.

% Histroy of virtualizing TEE. 

% Basic idea to virtualize TEE. simulation base virtualize. hardware virtualize. an conclusion of vTZ and TEEv method.

The arrangement of the report. Firstly talk about the software-simulation base
virtualization(vTZ). second hardwared-assisted base virtualization(not SEL2)

